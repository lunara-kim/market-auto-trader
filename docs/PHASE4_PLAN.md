# Phase 4: 프로덕션 준비 — 방향 옵션 정리

> Phase 3 (자동 매매 시스템 고도화) 완료 후, 실전 배포를 위한 Phase 4 로드맵입니다.
> 은혜님의 우선순위 결정이 필요합니다.

## 📊 현재 상태 (Phase 3 완료 기준)

| 항목 | 수치 |
|------|------|
| 총 PR | 30개 |
| 테스트 | 726 passed |
| 커버리지 | 95% |
| API 엔드포인트 | 20+ |
| 매매 전략 | 3종 (이동평균/RSI/볼린저밴드) + 복합 전략 |

---

## 🎯 Phase 4 옵션별 상세

### 옵션 A: 프론트엔드 대시보드 우선 (추천 ⭐)

**왜:** 이미 백엔드 API가 풍부하게 구현되어 있어, 프론트엔드를 붙이면 즉시 사용 가능한 제품이 됨.

**기술 스택 후보:**
| 스택 | 장점 | 단점 |
|------|------|------|
| **Next.js + React** | SSR, 라우팅 내장, 에코시스템 풍부 | 번들 크기, 러닝커브 |
| **Vite + React** | 빠른 빌드, 가벼움 | SSR 별도 설정 필요 |
| **Streamlit** | Python만으로 가능, 빠른 프로토타입 | 커스터마이징 제한 |

**구현 범위 (3~5일):**
1. 실시간 포트폴리오 대시보드 (PnL, 보유종목, 비중 차트)
2. 전략 비교 / 백테스트 시각화 (Recharts or Chart.js)
3. 알림 설정 관리 UI (손절/목표가 CRUD)
4. 리밸런싱 내역 타임라인
5. 헬스체크 상태 모니터

**의존성:** 없음 (기존 API 활용)

---

### 옵션 B: 모의투자 실전 연동 테스트 우선

**왜:** 실제 시장 데이터와 모의투자 환경에서 전체 플로우를 검증해야 실전 투입 가능.

**필요 조건:**
- ⚠️ 한국투자증권 모의투자 API 키 필요 (은혜님 발급)
- 모의투자 서버 접속 가능 환경

**테스트 시나리오 (1~2일):**
1. 실제 시세 조회 → 전략 신호 생성 → 모의 주문 실행
2. 장 마감 시 에러 핸들링 확인
3. 잔고 부족 시 동작 확인
4. WebSocket 실시간 시세 연동 테스트
5. 일일 리포트 자동 생성 확인

**의존성:** 한투 API 키 (은혜님 필요)

---

### 옵션 C: 배포 파이프라인 (CD) 구축

**왜:** 코드 머지 → 자동 배포 흐름이 있어야 운영 효율성 확보.

**구현 범위 (1~2일):**
1. GitHub Actions CD 워크플로우 (Docker 빌드 → 레지스트리 push)
2. 환경별 설정 분리 (`dev` / `staging` / `prod`)
3. Docker multi-stage 빌드 최적화
4. 시크릿 관리 (GitHub Secrets)
5. 배포 타겟 결정 필요:
   - **옵션 C-1:** 로컬 Docker Compose (개인 서버)
   - **옵션 C-2:** 클라우드 (AWS ECS / GCP Cloud Run)
   - **옵션 C-3:** VPS (DigitalOcean / Vultr)

**의존성:** 배포 타겟 결정 (은혜님)

---

### 옵션 D: 관측성 (Observability)

**왜:** 운영 중 문제를 빠르게 감지하고 디버깅.

**구현 범위 (1~2일):**
1. Prometheus 메트릭 (`prometheus-fastapi-instrumentator`)
   - API 응답시간, 에러율, 요청 수
   - 거래 관련 커스텀 메트릭 (주문 수, 체결율 등)
2. Grafana 대시보드 (Docker Compose에 추가)
   - API 퍼포먼스 패널
   - 거래 활동 패널
   - 시스템 리소스 패널
3. 구조적 로깅 (JSON 형식, `structlog`)

**의존성:** 없음

---

### 옵션 E: 보안 강화

**왜:** 외부 노출 전 필수 보안 레이어.

**구현 범위 (1일):**
1. API 인증 (`JWT` or `API Key`)
2. Rate limiting (`slowapi`)
3. 입력값 검증 강화 (Pydantic strict mode)
4. CORS 설정 (allowed origins)
5. 환경변수 기반 시크릿 관리 재검토

**의존성:** 없음

---

## 🗺️ 추천 진행 순서

```
E (보안) → A (프론트엔드) → D (관측성) → C (배포) → B (모의투자)
   1일        3~5일           1~2일        1~2일       1~2일
```

**이유:**
1. **보안부터:** API가 외부에 노출되기 전에 인증/인가 필수
2. **프론트엔드:** 가장 가시적인 성과, 포트폴리오에도 좋음
3. **관측성:** 운영 전 모니터링 체계 구축
4. **배포:** 자동화된 배포 파이프라인
5. **모의투자:** API 키 필요 → 병렬로 준비, 키 받으면 바로 실행

**총 예상 기간: 7~12일**

---

## 💡 은혜님 결정 필요 사항

1. **프론트엔드 스택 선호도** — Next.js vs Vite+React vs Streamlit?
2. **배포 타겟** — 로컬 / 클라우드 / VPS?
3. **한투 모의투자 API 키** — 발급 가능 시점?
4. **우선순위 조정** — 위 추천 순서 변경 여부?
5. **추가 기능 요청** — Phase 4에 추가하고 싶은 것?

---

_작성: 짱덕이 🐈‍⬛ | 2026-02-15_
